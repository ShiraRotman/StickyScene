(this["webpackJsonpsticky-scene"]=this["webpackJsonpsticky-scene"]||[]).push([[0],{10:function(e,t,n){e.exports=n(15)},15:function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i),a=n(7),s=n.n(a),c=n(2),o=n(3),l=n(1),u=n(5),d=n(4),h=n(8),g=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,e)).state={},"toggled"in e||(i.state.toggled=!1),i.buttonPressed=i.buttonPressed.bind(Object(l.a)(i)),i.buttonReleased=i.buttonReleased.bind(Object(l.a)(i)),i}return Object(o.a)(n,[{key:"buttonPressed",value:function(){"toggled"in this.props||this.setState({toggled:!0})}},{key:"buttonReleased",value:function(){"toggled"in this.props||this.setState({toggled:!1})}},{key:"render",value:function(){var e,t="pseudo-button icon-wrapper";return t+=(e="toggled"in this.props?this.props.toggled:this.state.toggled)?" toggled":" untoggled","className"in this.props&&(t+=" "+this.props.className),r.a.createElement("div",{className:t,role:"button",onClick:this.props.onClick,onMouseDown:this.buttonPressed,onMouseUp:this.buttonReleased,onMouseLeave:this.buttonReleased},r.a.createElement("img",{src:e&&"toggledIcon"in this.props?this.props.toggledIcon:this.props.icon,alt:this.props.alt,className:"w-100 h-100",draggable:!1}))}}]),n}(r.a.Component),m="Prototype methods can't be called from instances of the base class!",p=function(){function e(){Object(c.a)(this,e)}return Object(o.a)(e,[{key:"getScenesThumbs",value:function(){throw new TypeError(m)}},{key:"getSceneImage",value:function(e){throw new TypeError(m)}},{key:"getStickerImage",value:function(e){throw new TypeError(m)}},{key:"getStickersThumbs",value:function(e){throw new TypeError(m)}}]),e}(),f=window.innerWidth,b=window.innerHeight;p.pageWidth=f,p.pageHeight=b,p.sceneThumbWidth=function(e){return e<1200?128:192}(f),p.sceneThumbHeight=p.sceneThumbWidth*(b/f),p.stickerThumbWidth=p.sceneThumbWidth/2,p.stickerThumbHeight=p.stickerThumbWidth,p.stickerWidth=p.stickerThumbWidth,p.stickerHeight=p.stickerThumbHeight;var k=["underwater-treasures","space-cosmonaut"],v={"underwater-treasures":["blue-black-fish","dory-fish","submarine","seahorse"],"space-cosmonaut":["rocket-spaceship","alien-flying-saucer"]},E=new(function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"getScenesThumbs",value:function(){return k.map((function(e){return{id:e,path:"/StickyScene/hardcoded/scenes/thumbs/"+e+".jpg"}}))}},{key:"getStickersThumbs",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=v[e];if(n||(n=[]),!t)for(var i in v)i!==e&&(n=n.concat(v[i]));return n.map((function(e){return{id:e,path:"/StickyScene/hardcoded/stickers/"+e+".jpg"}}))}},{key:"getSceneImage",value:function(e){return"/StickyScene/hardcoded/scenes/"+e+".jpg"}},{key:"getStickerImage",value:function(e){return"/StickyScene/hardcoded/stickers/"+e+".jpg"}}]),n}(p)),y=[{type:"mousedown",listener:C},{type:"mousemove",listener:M},{type:"mouseup",listener:D},{type:"mouseleave",listener:M}],S=[{type:"pointerdown",listener:function(e){N(e,"dragdropstart",C)}},{type:"pointermove",listener:I},{type:"pointerup",listener:function(e){N(e,"dragdropend",D)}},{type:"pointerleave",listener:I},{type:"pointercancel",listener:P}],w=[{type:"touchstart",listener:function(e){e.preventDefault();var t=e.target,n=e.targetTouches[0];t.setAttribute("data-touch",n.identifier),j(t,"dragdropstart",n)}},{type:"touchmove",listener:function(e){_(e,"dragdropmove")}},{type:"touchend",listener:function(e){_(e,"dragdropend",!0)}},{type:"touchcancel",listener:P}];function T(e){if(!e)throw new ReferenceError("A DOM element must be supplied!");if(!(e instanceof Element))throw new TypeError("The parameter supplied must be a DOM element!")}function O(e,t){window.TouchEvent?(y.forEach((function(e){return t(e.type,e.listener)})),w.forEach((function(e){return t(e.type,e.listener)}))):window.PointerEvent?S.forEach((function(e){return t(e.type,e.listener)})):y.forEach((function(e){return t(e.type,e.listener)}))}function j(e,t,n){var i;n&&(i={detail:{pageX:n.pageX,pageY:n.pageY}}),e.dispatchEvent(new CustomEvent(t,i))}function C(e){0===e.button&&j(e.target,"dragdropstart",e)}function M(e){0!==(1&e.buttons)&&j(e.target,"dragdropmove",e)}function D(e){0===e.button&&j(e.target,"dragdropend",e)}function N(e,t,n){e.isPrimary&&("mouse"===e.pointerType?n(e):j(e.target,t,e))}function I(e){N(e,"dragdropmove",M)}function _(e,t,n){e.preventDefault();var i=e.target;if(i.hasAttribute("data-touch")){for(var r=Number.parseInt(i.getAttribute("data-touch")),a=!1,s=0;!a&&s<e.changedTouches.length;)e.changedTouches[s].identifier===r?a=!0:s++;a?(e.stopPropagation(),n&&i.removeAttribute("data-touch"),j(i,t,e.changedTouches[s])):P(e)}}function P(e){var t=e.target;t.removeAttribute("data-touch"),j(t,"dragdropcancel")}var R={registerDragEvents:function(e){T(e),e.draggable=!1,O(0,e.addEventListener.bind(e))},unregisterDragEvents:function(e){T(e),O(0,e.removeEventListener.bind(e))},DRAG_START_EVENT_TYPE:"dragdropstart",DRAG_MOVE_EVENT_TYPE:"dragdropmove",DRAG_END_EVENT_TYPE:"dragdropend",DRAG_CANCEL_EVENT_TYPE:"dragdropcancel"},A=["newscene","loadscene","savescene"],W=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,e)).state={shown:!1,sceneSelection:!1},i.toggleMenus=i.toggleMenus.bind(Object(l.a)(i)),i.handleMenuOptionClick=i.handleMenuOptionClick.bind(Object(l.a)(i)),i.handleNewSceneSelect=i.handleNewSceneSelect.bind(Object(l.a)(i)),i.handleStickerSelect=i.handleStickerSelect.bind(Object(l.a)(i)),i}return Object(o.a)(n,[{key:"toggleMenus",value:function(){var e=this;this.setState((function(t){return{shown:!e.state.shown,sceneSelection:!1}}))}},{key:"handleMenuOptionClick",value:function(e){switch(e.currentTarget.id){case"newscene":this.setState({sceneSelection:!0});break;case"menuback":this.setState({sceneSelection:!1});break;default:this.props.onMenuItemClick(new CustomEvent(e.currentTarget.id)),this.setState({shown:!1})}}},{key:"handleNewSceneSelect",value:function(e){this.sendThumbClickEvent("newscene",e.currentTarget.id),this.setState({shown:!1,sceneSelection:!1})}},{key:"handleStickerSelect",value:function(e){this.sendThumbClickEvent("addsticker",e.currentTarget.id)}},{key:"sendThumbClickEvent",value:function(e,t){var n=new CustomEvent(e,{detail:{imageID:t}});this.props.onMenuItemClick(n)}},{key:"render",value:function(){var e=this,t=this.state.sceneSelection?["menuback"]:A,n=t.map((function(t){return r.a.createElement("div",{className:"menu-item icon-wrapper my-1",id:t,key:t,onClick:e.handleMenuOptionClick},r.a.createElement("img",{src:"/StickyScene/icons/"+t+".svg",alt:"Menu Option",className:"w-100 h-100"}))}));return this.state.sceneSelection&&(t=E.getScenesThumbs(),n=n.concat(t.map((function(t){return r.a.createElement("div",{className:"menu-item scene-item",id:t.id,key:t.id,onClick:e.handleNewSceneSelect,style:{width:p.sceneThumbWidth,height:p.sceneThumbHeight}},r.a.createElement("img",{src:t.path,alt:"Scene Thumb",className:"w-100 h-100"}))})))),r.a.createElement(h.a,{interactive:!0,arrow:!1,offset:[0,0],visible:this.state.shown,placement:"bottom-start",className:"floating-menu vertical-floating-menu",theme:"light",content:n},r.a.createElement(h.a,{interactive:!0,arrow:!1,offset:[0,0],visible:this.state.shown,placement:"left-start",theme:"light",maxWidth:"none",className:"floating-menu",content:E.getStickersThumbs(this.props.sceneID).map((function(t){return r.a.createElement("img",{src:t.path,alt:"Sticker Thumb",onClick:e.handleStickerSelect,className:"menu-item sticker-item",key:t.id,id:t.id,style:{width:p.stickerThumbWidth,height:p.stickerThumbHeight}})}))},r.a.createElement("span",{className:"menu-toggle"},r.a.createElement(g,{icon:"/StickyScene/icons/menus.svg",alt:"Menus",toggled:this.state.shown,onClick:this.toggleMenus}))))}}]),n}(r.a.Component),Y=n(6),H=n.n(Y),L=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,e)).state={isFullScrMode:!1},i.fullscrModeChanged=i.fullscrModeChanged.bind(Object(l.a)(i)),i.buttonClicked=i.buttonClicked.bind(Object(l.a)(i)),i}return Object(o.a)(n,[{key:"componentDidMount",value:function(){H.a.fullscreenEnabled&&H.a.addEventListener("fullscreenchange",this.fullscrModeChanged)}},{key:"componentWillUnmount",value:function(){H.a.fullscreenEnabled&&H.a.removeEventListener("fullscreenchange",this.fullscrModeChanged)}},{key:"fullscrModeChanged",value:function(){this.setState({isFullScrMode:null!==H.a.fullscreenElement})}},{key:"buttonClicked",value:function(){null===H.a.fullscreenElement?H.a.requestFullscreen(document.documentElement):H.a.exitFullscreen()}},{key:"render",value:function(){return r.a.createElement(g,{alt:"Fullscreen Mode",onClick:this.buttonClicked,className:"full-screen-button"+(H.a.fullscreenEnabled?"":" d-none"),icon:"/StickyScene/icons/"+(this.state.isFullScrMode?"exitfullscr":"fullscreen")+".svg"})}}]),n}(r.a.Component),V=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,e)).element=r.a.createRef(),i.state={coordX:(window.innerWidth-p.stickerWidth)/2,coordY:(window.innerHeight-p.stickerHeight)/2},i.dragEvents=[{type:R.DRAG_START_EVENT_TYPE,listener:i.controllerPressed.bind(Object(l.a)(i))},{type:R.DRAG_MOVE_EVENT_TYPE,listener:i.controllerMoved.bind(Object(l.a)(i))},{type:R.DRAG_END_EVENT_TYPE,listener:i.controllerReleased.bind(Object(l.a)(i))},{type:R.DRAG_CANCEL_EVENT_TYPE,listener:i.controllerLeft.bind(Object(l.a)(i))}],i}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this.element.current;this.dragEvents.forEach((function(t){return e.addEventListener(t.type,t.listener)})),R.registerDragEvents(e)}},{key:"componentWillUnmount",value:function(){var e=this.element.current;R.unregisterDragEvents(e),this.dragEvents.forEach((function(t){return e.removeEventListener(t.type,t.listener)}))}},{key:"controllerPressed",value:function(e){if(!this.dragging){var t=this.element.current.getBoundingClientRect();this.dragging={originX:e.detail.pageX-t.left,originY:e.detail.pageY-t.top}}}},{key:"controllerMoved",value:function(e){this.dragging&&this.updatePosition(e)}},{key:"controllerLeft",value:function(){this.dragging&&delete this.dragging}},{key:"controllerReleased",value:function(e){if(this.dragging){this.updatePosition(e),delete this.dragging;var t=this.element.current;this.setState({coordX:t.style.left,coordY:t.style.top})}}},{key:"updatePosition",value:function(e){var t=this.element.current;t.style.left=e.detail.pageX-this.dragging.originX+"px",t.style.top=e.detail.pageY-this.dragging.originY+"px"}},{key:"render",value:function(){return r.a.createElement("img",{src:E.getStickerImage(this.props.stickerID),alt:"Sticker",draggable:!1,ref:this.element,style:{width:p.stickerWidth,height:p.stickerHeight,position:"absolute",left:this.state.coordX,top:this.state.coordY}})}}]),n}(r.a.Component),X=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,e)).state={sceneID:"underwater-treasures",stickers:[]},i.menuItemClicked=i.menuItemClicked.bind(Object(l.a)(i)),i}return Object(o.a)(n,[{key:"menuItemClicked",value:function(e){switch(e.type){case"newscene":this.setState({sceneID:e.detail.imageID,stickers:[]});break;case"addsticker":this.state.stickers.push(e.detail.imageID),this.setState((function(e){return{stickers:e.stickers}}))}}},{key:"render",value:function(){return r.a.createElement("div",{className:"w-100 h-100"},r.a.createElement("img",{src:E.getSceneImage(this.state.sceneID),alt:"Background Scene",className:"w-100 h-100"}),this.state.stickers.map((function(e,t){return r.a.createElement(V,{stickerID:e,key:"sticker-"+t})})),r.a.createElement(W,{sceneID:this.state.sceneID,onMenuItemClick:this.menuItemClicked}),r.a.createElement(L,null))}}]),n}(r.a.Component);s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(X,null)),document.getElementById("stickySceneRoot"))}},[[10,1,2]]]);
//# sourceMappingURL=main.384fa2e0.chunk.js.map