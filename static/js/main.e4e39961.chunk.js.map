{"version":3,"sources":["icon-button.js","image-source.js","hardcoded-source.js","utils.js","floating-menus.js","full-screen-button.js","drag-drop-service.js","sticker.js","sticky-scene.js","index.js"],"names":["IconButton","props","state","toggled","buttonPressed","bind","buttonReleased","this","setState","buttonClassName","className","role","onClick","onMouseDown","onMouseUp","onMouseLeave","src","toggledIcon","icon","alt","draggable","React","Component","ABSTRACT_METHOD_ERROR_TEXT","ImageSource","TypeError","sceneID","stickerID","pageWidth","window","innerWidth","pageHeight","innerHeight","sceneThumbWidth","calcSceneThumbWidth","sceneThumbHeight","stickerThumbWidth","stickerThumbHeight","stickerWidth","stickerHeight","availScenes","sceneStickersMap","imageSource","map","imageID","id","path","SCENES_IMAGES_PATH","sceneOnly","thumbs","sceneImageID","concat","process","screenOrientation","orientation","screen","mozOrientation","msOrientation","lockOrientation","mozLockOrientation","msLockOrientation","MatrixOperations","createIdentityMatrix","rank","undefined","ReferenceError","Number","isInteger","RangeError","identityMatrix","Array","index","length","fill","create2DScaleMatrix","scaleX","scaleY","create2DRotationMatrix","angle","inRadians","Math","PI","sine","sin","cosine","cos","multiplyMatrices","leftMatrix","rightMatrix","isArray","resultMatrix","rowIndex","colIndex","resultElement","OPTIONS_MENU_ICONS","FloatingMenus","shown","sceneSelection","toggleMenus","handleMenuOptionClick","handleNewSceneSelect","handleStickerSelect","event","currentTarget","onMenuItemClick","CustomEvent","sendThumbClickEvent","type","thumbID","menuEvent","detail","verticalMenuArray","verticalMenu","key","getScenesThumbs","thumb","style","width","height","interactive","arrow","offset","visible","placement","theme","content","maxWidth","getStickersThumbs","FullScreenButton","isFullScrMode","fullscrModeChanged","buttonClicked","fullscreen","fullscreenEnabled","addEventListener","removeEventListener","isFullScreen","fullscreenElement","onChange","requestFullscreen","document","documentElement","exitFullscreen","mouseEvents","listener","elemMouseButtonDown","elemMouseMoved","elemMouseButtonUp","pointerEvents","handlePointerEvent","elemPointerMoved","elemInteractCancelled","touchEvents","preventDefault","element","target","touch","targetTouches","setAttribute","identifier","sendCustomDragEvent","handleTouchMotionEvent","validateElement","Element","handleRegUnreg","listenerFunc","TouchEvent","forEach","PointerEvent","detailSource","eventInit","pageX","pageY","dispatchEvent","button","buttons","mouseEventFunc","isPrimary","pointerType","hasToRemoveAttr","hasAttribute","touchID","parseInt","getAttribute","found","changedTouches","stopPropagation","removeAttribute","DragDropService","registerDragEvents","unregisterDragEvents","TOUCH_ID_ATTR","DRAG_START_EVENT_TYPE","DRAG_MOVE_EVENT_TYPE","DRAG_END_EVENT_TYPE","DRAG_CANCEL_EVENT_TYPE","transforms","title","transform","SCALE_FRACTION","Sticker","createRef","menuShown","coordX","coordY","dragEvents","controllerPressed","controllerMoved","controllerReleased","controllerLeft","operations","clickfunc","resetItemClicked","onRemove","current","dragging","bounds","getBoundingClientRect","startTime","Date","now","originX","left","originY","top","updatePosition","operation","operationItemClicked","getStickerImage","ref","position","StickyScene","nextIndex","stickers","menuItemClicked","push","sticker","arrayIndex","findIndex","stickerData","splice","hasOwnProperty","String","locked","lock","then","catch","getSceneImage","stickerRemoved","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.e4e39961.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nexport default class IconButton extends React.Component\r\n{\r\n\tconstructor(props)\r\n\t{\r\n\t\tsuper(props); this.state={ };\r\n\t\tif (!(\"toggled\" in props)) this.state.toggled=false;\r\n\t\tthis.buttonPressed=this.buttonPressed.bind(this);\r\n\t\tthis.buttonReleased=this.buttonReleased.bind(this);\r\n\t}\r\n\t\r\n\tbuttonPressed()\r\n\t{ if (!(\"toggled\" in this.props)) this.setState({ toggled: true }); }\r\n\t\r\n\tbuttonReleased()\r\n\t{ if (!(\"toggled\" in this.props)) this.setState({ toggled: false }); }\r\n\t\r\n\trender()\r\n\t{\r\n\t\tlet buttonClassName=\"pseudo-button icon-wrapper\",toggled;\r\n\t\tif (\"toggled\" in this.props) toggled=this.props.toggled;\r\n\t\telse toggled=this.state.toggled;\r\n\t\tif (toggled) buttonClassName+=\" toggled\";\r\n\t\telse buttonClassName+=\" untoggled\";\r\n\t\tif (\"className\" in this.props)\r\n\t\t\tbuttonClassName+=\" \" + this.props.className;\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<div className={buttonClassName} role=\"button\" onClick={this.props.onClick}\r\n\t\t\t\tonMouseDown={this.buttonPressed} onMouseUp={this.buttonReleased}\r\n\t\t\t\tonMouseLeave={this.buttonReleased}>\r\n\t\t\t\t<img src={!toggled?this.props.icon:(\"toggledIcon\" in this.props?\r\n\t\t\t\t\tthis.props.toggledIcon:this.props.icon)} alt={this.props.alt}\r\n\t\t\t\t\tclassName=\"w-100 h-100\" draggable={false}/>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n","\r\nconst ABSTRACT_METHOD_ERROR_TEXT=\"Prototype methods can't be called from \" + \r\n\t\t\"instances of the base class!\";\r\n\r\nexport default class ImageSource\r\n{\t\r\n\tgetScenesThumbs() { throw new TypeError(ABSTRACT_METHOD_ERROR_TEXT); }\r\n\tgetSceneImage(sceneID) { throw new TypeError(ABSTRACT_METHOD_ERROR_TEXT); }\r\n\tgetStickerImage(stickerID) { throw new TypeError(ABSTRACT_METHOD_ERROR_TEXT); }\r\n\t\r\n\tgetStickersThumbs(sceneID,sceneOnly=true)\r\n\t{ throw new TypeError(ABSTRACT_METHOD_ERROR_TEXT); }\r\n}\r\n\r\nconst pageWidth=getPageWidth(),pageHeight=getPageHeight();\r\nImageSource.pageWidth=pageWidth; ImageSource.pageHeight=pageHeight;\r\n\r\nImageSource.sceneThumbWidth=calcSceneThumbWidth(pageWidth);\r\nImageSource.sceneThumbHeight=ImageSource.sceneThumbWidth*(pageHeight/pageWidth);\r\n\r\nImageSource.stickerThumbWidth=ImageSource.sceneThumbWidth/2;\r\nImageSource.stickerThumbHeight=ImageSource.stickerThumbWidth;\r\n\r\n//Not supposed to be constant - remove when implementing size mapping!\r\nImageSource.stickerWidth=ImageSource.stickerThumbWidth;\r\nImageSource.stickerHeight=ImageSource.stickerThumbHeight;\r\n\r\nfunction getPageWidth() { return window.innerWidth; }\r\nfunction getPageHeight() { return window.innerHeight; }\r\n\r\nfunction calcSceneThumbWidth(pageWidth)\r\n{\r\n\tif (pageWidth<1200) return 128;\r\n\telse return 192;\r\n}\r\n","import ImageSource from \"./image-source.js\";\r\n\r\nconst SCENES_IMAGES_PATH=process.env.PUBLIC_URL + \"/hardcoded/scenes/\";\r\nconst SCENES_THUMBS_PATH=SCENES_IMAGES_PATH + \"thumbs/\";\r\n\r\nconst STICKERS_IMAGES_PATH=process.env.PUBLIC_URL + \"/hardcoded/stickers/\";\r\nconst STICKERS_THUMBS_PATH=STICKERS_IMAGES_PATH;\r\n\r\nconst availScenes=[\"underwater-treasures\",\"space-cosmonaut\"];\r\nconst sceneStickersMap= //For scaling, add a subpath\r\n{ \r\n\t\"underwater-treasures\": [\"blue-black-fish\",\"dory-fish\",\"submarine\",\"seahorse\"],\r\n\t\"space-cosmonaut\": [\"rocket-spaceship\",\"alien-flying-saucer\"]\r\n}\r\n\r\n//TODO: Map to size and add suffix to file names\r\nexport default class HardcodedImageSource extends ImageSource\r\n{\r\n\tgetScenesThumbs()\r\n\t{\t\r\n\t\treturn availScenes.map(imageID => \r\n\t\t({ id: imageID, path: SCENES_THUMBS_PATH + imageID + \".jpg\" }));\r\n\t}\r\n\t\r\n\tgetStickersThumbs(sceneID,sceneOnly=true)\r\n\t{\r\n\t\tlet thumbs=sceneStickersMap[sceneID]; if (!thumbs) thumbs=[];\r\n\t\tif (!sceneOnly)\r\n\t\t{\r\n\t\t\tfor (let sceneImageID in sceneStickersMap)\r\n\t\t\t{\r\n\t\t\t\tif (sceneImageID!==sceneID)\r\n\t\t\t\t\tthumbs=thumbs.concat(sceneStickersMap[sceneImageID]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn thumbs.map(imageID => \r\n\t\t({ id: imageID, path: STICKERS_THUMBS_PATH + imageID + \".jpg\" }));\r\n\t}\r\n\t\r\n\tgetSceneImage(sceneID) { return SCENES_IMAGES_PATH + sceneID + \".jpg\"; }\r\n\tgetStickerImage(stickerID) { return STICKERS_IMAGES_PATH + stickerID + \".jpg\"; }\r\n}\r\n","import HardcodedImageSource from \"./hardcoded-source.js\";\r\nconst imageSource=new HardcodedImageSource();\r\n\r\nfunction multiplyMatrices(leftMatrix,rightMatrix)\r\n{\r\n\tif ((leftMatrix===undefined)||(rightMatrix===undefined))\r\n\t\tthrow new ReferenceError(\"The matrices must be supplied!\");\r\n\telse if ((!Array.isArray(leftMatrix))||(!Array.isArray(rightMatrix)))\r\n\t\tthrow new TypeError(\"The parameters supplied must be matrices!\");\r\n\telse if ((leftMatrix.length===0)||(rightMatrix.length===0))\r\n\t\tthrow new RangeError(\"The matrices must contain elements!\");\r\n\t/*If any of the other rows contains a different number of elements, an error\r\n\t  will be thrown during the operation*/\r\n\telse if (leftMatrix[0].length!==rightMatrix.length)\r\n\t\tthrow new RangeError(\"The matrices' dimensions must be compatible!\");\r\n\t\r\n\tconst resultMatrix=new Array(leftMatrix.length);\r\n\tfor (let index=0;index<resultMatrix.length;index++)\r\n\t\tresultMatrix[index]=new Array(rightMatrix[0].length);\r\n\t\r\n\t//This is an O(n^3) algorithm, but it's only used for small matrices\r\n\tfor (let rowIndex=0;rowIndex<leftMatrix.length;rowIndex++)\r\n\t\tfor (let colIndex=0;colIndex<rightMatrix[0].length;colIndex++)\r\n\t\t{\r\n\t\t\tlet resultElement=0;\r\n\t\t\tfor (let index=0; index<rightMatrix.length;index++)\r\n\t\t\t\tresultElement+=leftMatrix[rowIndex][index]*rightMatrix[index][colIndex];\r\n\t\t\tresultMatrix[rowIndex][colIndex]=resultElement;\r\n\t\t}\r\n\treturn resultMatrix;\r\n}\r\n\r\nfunction createIdentityMatrix(rank)\r\n{\r\n\tif (rank===undefined)\r\n\t\tthrow new ReferenceError(\"The matrix's rank must be supplied!\");\r\n\telse if (typeof(rank)!==\"number\")\r\n\t\tthrow new TypeError(\"The matrix's rank must be a number!\");\r\n\telse if (!Number.isInteger(rank))\r\n\t\tthrow new RangeError(\"The matrix's rank must be an integer!\");\r\n\telse if (rank<0)\r\n\t\tthrow new RangeError(\"The matrix's rank must be greater than or equal to 0!\");\r\n\telse if (rank===0) return [];\r\n\telse if (rank===1) return [1];\r\n\telse\r\n\t{\r\n\t\tconst identityMatrix=new Array(rank);\r\n\t\tfor (let index=0;index<identityMatrix.length;index++)\r\n\t\t{ identityMatrix[index]=new Array(rank); identityMatrix[index].fill(0); }\r\n\t\tfor (let index=0;index<rank;index++) identityMatrix[index][index]=1;\r\n\t\treturn identityMatrix;\r\n\t}\r\n}\r\n\r\nfunction create2DScaleMatrix(scaleX,scaleY)\r\n{\r\n\tif (scaleX===undefined)\r\n\t\tthrow new ReferenceError(\"At least 1 scale measure must be supplied!\");\r\n\telse if (scaleY===undefined) scaleY=scaleX;\r\n\tif ((typeof(scaleX)!==\"number\")||(typeof(scaleY)!==\"number\"))\r\n\t\tthrow new TypeError(\"The scale measures must be numbers!\");\r\n\telse return [[scaleX,0],[0,scaleY]];\r\n}\r\n\r\nfunction create2DRotationMatrix(angle,inRadians=false)\r\n{\r\n\tif (angle===undefined)\r\n\t\tthrow new ReferenceError(\"The rotation angle must be supplied!\");\r\n\telse if (typeof(angle)!==\"number\")\r\n\t\tthrow new TypeError(\"The rotation angle must be a number!\");\r\n\telse\r\n\t{\r\n\t\tif (!inRadians) angle=angle/360*2*Math.PI;\r\n\t\tconst sine=Math.sin(angle),cosine=Math.cos(angle);\r\n\t\treturn [[cosine,-sine],[sine,cosine]];\r\n\t}\r\n}\r\n\r\nconst screenOrientation=\r\n{\r\n\torientation: (window.screen.orientation || window.screen.mozOrientation ||\r\n\t\t\twindow.screen.msOrientation),\r\n\tlockOrientation: (window.screen.lockOrientation || window.screen.mozLockOrientation || \r\n\t\t\twindow.screen.msLockOrientation)\r\n};\r\n\r\nconst MatrixOperations=\r\n{ createIdentityMatrix, create2DScaleMatrix, create2DRotationMatrix, multiplyMatrices };\r\nexport { imageSource, screenOrientation, MatrixOperations };\r\n","import React from \"react\";\r\nimport Tippy from \"@tippyjs/react\";\r\n\r\nimport IconButton from \"./icon-button.js\";\r\nimport ImageSource from \"./image-source.js\";\r\nimport { imageSource } from \"./utils.js\";\r\n\r\nconst OPTIONS_MENU_ICONS=[\"newscene\",\"loadscene\",\"savescene\"];\r\n\r\nexport default class FloatingMenus extends React.Component\r\n{\r\n\tconstructor(props)\r\n\t{ \r\n\t\tsuper(props); this.state={ shown: false, sceneSelection: false };\r\n\t\tthis.toggleMenus=this.toggleMenus.bind(this);\r\n\t\tthis.handleMenuOptionClick=this.handleMenuOptionClick.bind(this);\r\n\t\tthis.handleNewSceneSelect=this.handleNewSceneSelect.bind(this);\r\n\t\tthis.handleStickerSelect=this.handleStickerSelect.bind(this);\r\n\t}\r\n\t\r\n\ttoggleMenus()\r\n\t{ \r\n\t\tthis.setState(state => \r\n\t\t({ shown: !this.state.shown, sceneSelection: false }));\r\n\t}\r\n\t\r\n\thandleMenuOptionClick(event)\r\n\t{\r\n\t\tswitch (event.currentTarget.id)\r\n\t\t{ \r\n\t\t\tcase \"newscene\": this.setState({ sceneSelection: true }); break;\r\n\t\t\tcase \"menuback\": this.setState({ sceneSelection: false }); break;\r\n\t\t\tdefault:\r\n\t\t\t\tthis.props.onMenuItemClick(new CustomEvent(event.currentTarget.id));\r\n\t\t\t\tthis.setState({ shown: false });\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\t\r\n\thandleNewSceneSelect(event)\r\n\t{\r\n\t\tthis.sendThumbClickEvent(\"newscene\",event.currentTarget.id);\r\n\t\tthis.setState({ shown: false, sceneSelection: false });\r\n\t}\r\n\t\r\n\thandleStickerSelect(event)\r\n\t{ this.sendThumbClickEvent(\"addsticker\",event.currentTarget.id); }\r\n\t\r\n\tsendThumbClickEvent(type,thumbID)\r\n\t{\r\n\t\tconst menuEvent=new CustomEvent(type,{ detail: { imageID: thumbID } });\r\n\t\tthis.props.onMenuItemClick(menuEvent);\r\n\t}\r\n\t\r\n\trender()\r\n\t{\r\n\t\tlet verticalMenuArray=(this.state.sceneSelection?[\"menuback\"]:OPTIONS_MENU_ICONS);\r\n\t\tlet verticalMenu=verticalMenuArray.map(icon => \r\n\t\t\t<div className=\"menu-item icon-wrapper my-1\" id={icon} key={icon}\r\n\t\t\t\tonClick={this.handleMenuOptionClick}>\r\n\t\t\t\t<img src={process.env.PUBLIC_URL + \"/icons/\" + icon + \".svg\"}\r\n\t\t\t\t\talt=\"Menu Option\" className=\"w-100 h-100\"/>\r\n\t\t\t</div>\r\n\t\t);\r\n\t\t\r\n\t\tif (this.state.sceneSelection)\r\n\t\t{\r\n\t\t\tverticalMenuArray=imageSource.getScenesThumbs();\r\n\t\t\tverticalMenu=verticalMenu.concat(verticalMenuArray.map(thumb => \r\n\t\t\t\t<div className=\"menu-item scene-item\" id={thumb.id} key={thumb.id}\r\n\t\t\t\t\tonClick={this.handleNewSceneSelect} style={\r\n\t\t\t\t{\r\n\t\t\t\t\twidth: ImageSource.sceneThumbWidth,\r\n\t\t\t\t\theight: ImageSource.sceneThumbHeight\r\n\t\t\t\t}}>\r\n\t\t\t\t\t<img src={thumb.path} alt=\"Scene Thumb\" className=\"w-100 h-100\"/>\r\n\t\t\t\t</div>\r\n\t\t\t));\r\n\t\t}\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<Tippy interactive={true} arrow={false} offset={[0,0]} visible={this.state.shown}\r\n\t\t\t\tplacement=\"bottom-start\" className=\"floating-menu vertical-floating-menu\"\r\n\t\t\t\ttheme=\"light\" content={verticalMenu}>\r\n\t\t\t\t\r\n\t\t\t\t<Tippy interactive={true} arrow={false} offset={[0,0]} visible={this.state.shown}\r\n\t\t\t\t\tplacement=\"left-start\" theme=\"light\" maxWidth=\"none\"\r\n\t\t\t\t\tclassName=\"floating-menu\" content=\r\n\t\t\t\t\t{\t\r\n\t\t\t\t\t\timageSource.getStickersThumbs(this.props.sceneID).map(thumb => \r\n\t\t\t\t\t\t<img src={thumb.path} alt=\"Sticker Thumb\" onClick={this.handleStickerSelect}\r\n\t\t\t\t\t\t\tclassName=\"menu-item sticker-item\" key={thumb.id} id={thumb.id} style={\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\twidth: ImageSource.stickerThumbWidth,\r\n\t\t\t\t\t\t\theight: ImageSource.stickerThumbHeight\r\n\t\t\t\t\t\t}}/>\r\n\t\t\t\t\t)}>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<span className=\"menu-toggle\">\r\n\t\t\t\t\t\t<IconButton icon={process.env.PUBLIC_URL + \"/icons/menus.svg\"} alt=\"Menus\"\r\n\t\t\t\t\t\t\ttoggled={this.state.shown} onClick={this.toggleMenus}/>\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</Tippy>\r\n\t\t\t</Tippy>\r\n\t\t);\r\n\t}\r\n}\r\n","import React from \"react\";\r\nimport fullscreen from \"fscreen\";\r\nimport IconButton from \"./icon-button.js\";\r\n\r\nexport default class FullScreenButton extends React.Component\r\n{\r\n\tconstructor(props) \r\n\t{\r\n\t\tsuper(props); this.state={ isFullScrMode: false }\r\n\t\tthis.fullscrModeChanged=this.fullscrModeChanged.bind(this);\r\n\t\tthis.buttonClicked=this.buttonClicked.bind(this);\r\n\t}\r\n\t\r\n\tcomponentDidMount()\r\n\t{\r\n\t\tif (fullscreen.fullscreenEnabled)\r\n\t\t\tfullscreen.addEventListener(\"fullscreenchange\",this.fullscrModeChanged);\r\n\t}\r\n\t\r\n\tcomponentWillUnmount()\r\n\t{\r\n\t\tif (fullscreen.fullscreenEnabled)\r\n\t\t\tfullscreen.removeEventListener(\"fullscreenchange\",this.fullscrModeChanged);\r\n\t}\r\n\t\r\n\tfullscrModeChanged()\r\n\t{\r\n\t\tconst isFullScreen=(fullscreen.fullscreenElement!==null);\r\n\t\tif (this.props.onChange) this.props.onChange(isFullScreen);\r\n\t\tthis.setState({ isFullScrMode: isFullScreen });\r\n\t}\r\n\t\r\n\tbuttonClicked()\r\n\t{\r\n\t\tif (fullscreen.fullscreenElement===null)\r\n\t\t\tfullscreen.requestFullscreen(document.documentElement);\r\n\t\telse fullscreen.exitFullscreen();\r\n\t}\r\n\t\r\n\trender()\r\n\t{\r\n\t\treturn (\r\n\t\t\t<IconButton alt=\"Fullscreen Mode\" onClick={this.buttonClicked}\r\n\t\t\t\tclassName={\"full-screen-button\" + (!fullscreen.fullscreenEnabled?\" d-none\":\"\")}\r\n\t\t\t\ticon={process.env.PUBLIC_URL + \"/icons/\" + (this.state.isFullScrMode?\r\n\t\t\t\t\"exitfullscr\":\"fullscreen\") + \".svg\"}/>\r\n\t\t);\r\n\t}\r\n}\r\n","\r\n//Only these drag event types are needed for the application\r\nconst DRAG_START_EVENT_TYPE=\"dragdropstart\",DRAG_MOVE_EVENT_TYPE=\"dragdropmove\";\r\nconst DRAG_END_EVENT_TYPE=\"dragdropend\",DRAG_CANCEL_EVENT_TYPE=\"dragdropcancel\";\r\nconst MAIN_MOUSE_BUTTON=0,MAIN_MOUSE_BUTTON_FLAG=1,TOUCH_ID_ATTR=\"data-touch\";\r\n\r\nconst mouseEvents=[\r\n{ type: \"mousedown\", listener: elemMouseButtonDown },\r\n{ type: \"mousemove\", listener: elemMouseMoved },\r\n{ type: \"mouseup\", listener: elemMouseButtonUp },\r\n{ type: \"mouseleave\", listener: elemMouseMoved }];\r\n\r\nconst pointerEvents=[\r\n{ type: \"pointerdown\", listener: elemPointerDown },\r\n{ type: \"pointermove\", listener: elemPointerMoved },\r\n{ type: \"pointerup\", listener: elemPointerUp },\r\n{ type: \"pointerleave\", listener: elemPointerMoved },\r\n{ type: \"pointercancel\", listener: elemInteractCancelled }];\r\n\r\nconst touchEvents=[\r\n{ type: \"touchstart\", listener: elemTouchStarted },\r\n{ type: \"touchmove\", listener: elemTouchMoved },\r\n{ type: \"touchend\", listener: elemTouchEnded },\r\n{ type: \"touchcancel\", listener: elemInteractCancelled }];\r\n\r\nfunction validateElement(element)\r\n{\r\n\tif (!element) throw new ReferenceError(\"A DOM element must be supplied!\");\r\n\telse if (!(element instanceof Element))\r\n\t\tthrow new TypeError(\"The parameter supplied must be a DOM element!\");\r\n}\r\n\r\nfunction handleRegUnreg(element,listenerFunc)\r\n{\r\n\tif (window.TouchEvent)\r\n\t{\r\n\t\tmouseEvents.forEach(event => listenerFunc(event.type,event.listener));\r\n\t\ttouchEvents.forEach(event => listenerFunc(event.type,event.listener));\r\n\t}\r\n\telse if (window.PointerEvent)\r\n\t\tpointerEvents.forEach(event => listenerFunc(event.type,event.listener));\r\n\telse mouseEvents.forEach(event => listenerFunc(event.type,event.listener));\r\n}\r\n\r\nfunction registerDragEvents(element)\r\n{\r\n\tvalidateElement(element); element.draggable=false;\r\n\thandleRegUnreg(element,element.addEventListener.bind(element));\r\n}\r\n\r\nfunction unregisterDragEvents(element)\r\n{\r\n\tvalidateElement(element);\r\n\thandleRegUnreg(element,element.removeEventListener.bind(element));\r\n}\r\n\r\nfunction sendCustomDragEvent(element,type,detailSource)\r\n{\r\n\tlet eventInit;\r\n\tif (detailSource)\r\n\t{\r\n\t\teventInit=\r\n\t\t//Only these properties are needed in the application\r\n\t\t{ detail: { pageX: detailSource.pageX, pageY: detailSource.pageY } };\r\n\t}\r\n\telement.dispatchEvent(new CustomEvent(type,eventInit));\r\n}\r\n\r\nfunction elemMouseButtonDown(event)\r\n{\r\n\tif (event.button===MAIN_MOUSE_BUTTON) \r\n\t\tsendCustomDragEvent(event.target,DRAG_START_EVENT_TYPE,event);\r\n}\r\n\r\nfunction elemMouseMoved(event)\r\n{\r\n\tif ((event.buttons & MAIN_MOUSE_BUTTON_FLAG)!==0)\r\n\t\tsendCustomDragEvent(event.target,DRAG_MOVE_EVENT_TYPE,event);\r\n}\r\n\r\nfunction elemMouseButtonUp(event)\r\n{\r\n\tif (event.button===MAIN_MOUSE_BUTTON)\r\n\t\tsendCustomDragEvent(event.target,DRAG_END_EVENT_TYPE,event);\r\n}\r\n\r\nfunction handlePointerEvent(event,type,mouseEventFunc)\r\n{\r\n\tif (event.isPrimary)\r\n\t{\r\n\t\tif (event.pointerType===\"mouse\") mouseEventFunc(event);\r\n\t\telse sendCustomDragEvent(event.target,type,event);\r\n\t}\r\n}\r\n\r\nfunction elemPointerDown(event)\r\n{ handlePointerEvent(event,DRAG_START_EVENT_TYPE,elemMouseButtonDown); }\r\n\r\nfunction elemPointerMoved(event) \r\n{ handlePointerEvent(event,DRAG_MOVE_EVENT_TYPE,elemMouseMoved); }\r\n\r\nfunction elemPointerUp(event)\r\n{ handlePointerEvent(event,DRAG_END_EVENT_TYPE,elemMouseButtonUp); }\r\n\r\nfunction elemTouchStarted(event)\r\n{\r\n\tevent.preventDefault(); //Prevent mouse events from firing\r\n\tconst element=event.target,touch=event.targetTouches[0];\r\n\telement.setAttribute(TOUCH_ID_ATTR,touch.identifier);\r\n\tsendCustomDragEvent(element,DRAG_START_EVENT_TYPE,touch);\r\n}\r\n\r\nfunction handleTouchMotionEvent(event,type,hasToRemoveAttr)\r\n{\r\n\tevent.preventDefault(); const element=event.target;\r\n\tif (element.hasAttribute(TOUCH_ID_ATTR))\r\n\t{\r\n\t\tconst touchID=Number.parseInt(element.getAttribute(TOUCH_ID_ATTR));\r\n\t\tlet found=false,index=0;\r\n\t\twhile ((!found)&&(index<event.changedTouches.length))\r\n\t\t{\r\n\t\t\tif (event.changedTouches[index].identifier===touchID) found=true;\r\n\t\t\telse index++;\r\n\t\t}\r\n\t\tif (found)\r\n\t\t{\r\n\t\t\tevent.stopPropagation();\r\n\t\t\tif (hasToRemoveAttr) element.removeAttribute(TOUCH_ID_ATTR);\r\n\t\t\tsendCustomDragEvent(element,type,event.changedTouches[index]);\r\n\t\t}\r\n\t\telse elemInteractCancelled(event);\r\n\t}\r\n}\r\n\r\nfunction elemTouchMoved(event)\r\n{ handleTouchMotionEvent(event,DRAG_MOVE_EVENT_TYPE); }\r\n\r\nfunction elemTouchEnded(event)\r\n{ handleTouchMotionEvent(event,DRAG_END_EVENT_TYPE,true); }\r\n\r\nfunction elemInteractCancelled(event)\r\n{\r\n\tconst element=event.target;\r\n\telement.removeAttribute(TOUCH_ID_ATTR);\r\n\tsendCustomDragEvent(element,DRAG_CANCEL_EVENT_TYPE);\r\n}\r\n\r\nexport const DragDropService=\r\n{\r\n\tregisterDragEvents,unregisterDragEvents,TOUCH_ID_ATTR,DRAG_START_EVENT_TYPE,\r\n\tDRAG_MOVE_EVENT_TYPE,DRAG_END_EVENT_TYPE,DRAG_CANCEL_EVENT_TYPE\r\n};\r\n","import React from \"react\";\r\nimport Tippy from \"@tippyjs/react\";\r\n\r\nimport ImageSource from \"./image-source.js\";\r\nimport { DragDropService } from \"./drag-drop-service.js\";\r\nimport { imageSource, MatrixOperations } from \"./utils.js\";\r\n\r\nconst SCENE_BOUNDARY=0,CLICK_TAP_THRESHOLD=500;\r\nconst ROTATION_ANGLE=18,SCALE_FRACTION=0.1,transforms=[\r\n{ \r\n\ticon: \"rotate_left\", title: `Rotate left by ${ROTATION_ANGLE} degrees`,\r\n\ttransform: MatrixOperations.create2DRotationMatrix(ROTATION_ANGLE)\r\n},\r\n{ \r\n\ticon: \"rotate_right\", title: `Rotate right by ${ROTATION_ANGLE} degrees`,\r\n\ttransform: MatrixOperations.create2DRotationMatrix(-ROTATION_ANGLE)\r\n},\r\n{ \r\n\ticon: \"rotate90\", title: \"Rotate left by 90 degrees\",\r\n\ttransform: MatrixOperations.create2DRotationMatrix(90)\r\n},\r\n{ \r\n\ticon: \"flipimage\", title: \"Flip (mirror image)\",\r\n\ttransform: MatrixOperations.create2DScaleMatrix(-1,1)\r\n},\r\n{ \r\n\ticon: \"scaleup\", title: `Enlarge by ${SCALE_FRACTION*100}%`,\r\n\ttransform: MatrixOperations.create2DScaleMatrix(1+SCALE_FRACTION)\r\n},\r\n{ \r\n\ticon: \"scaledown\", title: `Shrink by ${SCALE_FRACTION*100}%`,\r\n\ttransform: MatrixOperations.create2DScaleMatrix(1-SCALE_FRACTION)\r\n}];\r\n\r\nexport default class Sticker extends React.Component\r\n{\r\n\tconstructor(props)\r\n\t{\r\n\t\tsuper(props); this.element=React.createRef();\r\n\t\t//TODO: Get dimensions from image data / file name\r\n\t\tthis.stickerWidth=ImageSource.stickerWidth; \r\n\t\tthis.stickerHeight=ImageSource.stickerHeight;\r\n\t\t\r\n\t\tthis.state=\r\n\t\t{\r\n\t\t\tmenuShown: false, \r\n\t\t\ttransform: MatrixOperations.createIdentityMatrix(2),\r\n\t\t\tcoordX: (window.innerWidth-this.stickerWidth)/2,\r\n\t\t\tcoordY: (window.innerHeight-this.stickerHeight)/2\r\n\t\t};\r\n\t\t\r\n\t\tthis.dragEvents=[\r\n\t\t{ \r\n\t\t\ttype: DragDropService.DRAG_START_EVENT_TYPE,\r\n\t\t\tlistener: this.controllerPressed.bind(this)\r\n\t\t},\r\n\t\t{\r\n\t\t\ttype: DragDropService.DRAG_MOVE_EVENT_TYPE,\r\n\t\t\tlistener: this.controllerMoved.bind(this)\r\n\t\t},\r\n\t\t{\r\n\t\t\ttype: DragDropService.DRAG_END_EVENT_TYPE,\r\n\t\t\tlistener: this.controllerReleased.bind(this)\r\n\t\t},\r\n\t\t{\r\n\t\t\ttype: DragDropService.DRAG_CANCEL_EVENT_TYPE,\r\n\t\t\tlistener: this.controllerLeft.bind(this)\r\n\t\t}];\r\n\t\t\r\n\t\tthis.operations=transforms.concat([\r\n\t\t{\r\n\t\t\ticon: \"resetimage\", title: \"Reset\", \r\n\t\t\tclickfunc: this.resetItemClicked.bind(this)\r\n\t\t},\r\n\t\t{ \r\n\t\t\ticon: \"delete_image\", title: \"Remove Sticker\", \r\n\t\t\tclickfunc: props.onRemove\r\n\t\t}]);\r\n\t}\r\n\t\r\n\tcomponentDidMount() \r\n\t{\r\n\t\tconst element=this.element.current;\r\n\t\tthis.dragEvents.forEach(event => element.addEventListener(event.type,\r\n\t\t\t\tevent.listener));\r\n\t\tif (this.touchID)\r\n\t\t{\r\n\t\t\telement.setAttribute(DragDropService.TOUCH_ID_ATTR,this.touchID);\r\n\t\t\tdelete this.touchID;\r\n\t\t}\r\n\t\tDragDropService.registerDragEvents(element);\r\n\t}\r\n\t\r\n\tcomponentWillUnmount()\r\n\t{\r\n\t\tconst element=this.element.current;\r\n\t\tDragDropService.unregisterDragEvents(element);\r\n\t\tthis.dragEvents.forEach(event => element.removeEventListener(event.type,\r\n\t\t\t\tevent.listener));\r\n\t\tif (element.hasAttribute(DragDropService.TOUCH_ID_ATTR))\r\n\t\t\tthis.touchID=element.getAttribute(DragDropService.TOUCH_ID_ATTR);\r\n\t}\r\n\t\r\n\tcontrollerPressed(event)\r\n\t{\r\n\t\tif (!this.dragging)\r\n\t\t{\r\n\t\t\tconst bounds=this.element.current.getBoundingClientRect();\r\n\t\t\tthis.dragging=\r\n\t\t\t{\r\n\t\t\t\tstartTime: Date.now(),\r\n\t\t\t\toriginX: event.detail.pageX-bounds.left,\r\n\t\t\t\toriginY: event.detail.pageY-bounds.top\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\t\r\n\tcontrollerLeft() { if (this.dragging) delete this.dragging; }\r\n\tcontrollerMoved(event) \r\n\t{ \r\n\t\tif (this.dragging)\r\n\t\t{\r\n\t\t\tthis.updatePosition(event); this.dragging.startTime=0;\r\n\t\t\tif (this.state.menuShown) this.setState({ menuShown: false });\r\n\t\t}\r\n\t}\r\n\t\r\n\tcontrollerReleased(event)\r\n\t{ \r\n\t\tif (this.dragging)\r\n\t\t{ \r\n\t\t\tconst element=this.element.current;\r\n\t\t\tif ((this.dragging.startTime>0)&&(Date.now()-this.dragging.startTime<=\r\n\t\t\t\t\tCLICK_TAP_THRESHOLD))\r\n\t\t\t\tthis.setState(state => ({ menuShown: !state.menuShown }));\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.updatePosition(event);\r\n\t\t\t\tthis.setState(\r\n\t\t\t\t{\r\n\t\t\t\t\tcoordX: Number.parseInt(element.style.left),\r\n\t\t\t\t\tcoordY: Number.parseInt(element.style.top)\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tdelete this.dragging;\r\n\t\t} \r\n\t}\r\n\t\r\n\tupdatePosition(event)\r\n\t{\r\n\t\tlet coordX=event.detail.pageX-this.dragging.originX;\r\n\t\tlet coordY=event.detail.pageY-this.dragging.originY;\r\n\t\tif (coordX<SCENE_BOUNDARY) coordX=SCENE_BOUNDARY;\r\n\t\telse if (coordX+this.stickerWidth+SCENE_BOUNDARY>window.innerWidth)\r\n\t\t\tcoordX=window.innerWidth-this.stickerWidth-SCENE_BOUNDARY;\r\n\t\tif (coordY<SCENE_BOUNDARY) coordY=SCENE_BOUNDARY;\r\n\t\telse if (coordY+this.stickerHeight+SCENE_BOUNDARY>window.innerHeight)\r\n\t\t\tcoordY=window.innerHeight-this.stickerHeight-SCENE_BOUNDARY;\r\n\t\t\r\n\t\tconst element=this.element.current;\r\n\t\telement.style.left=coordX + \"px\"; element.style.top=coordY + \"px\";\r\n\t}\r\n\t\r\n\toperationItemClicked(transform)\r\n\t{\r\n\t\tthis.setState(state => \r\n\t\t({ transform: MatrixOperations.multiplyMatrices(transform,state.transform) }));\r\n\t}\r\n\t\r\n\tresetItemClicked()\r\n\t{ this.setState({ transform: MatrixOperations.createIdentityMatrix(2) }); }\r\n\t\r\n\trender()\r\n\t{\r\n\t\tconst transform=this.state.transform;\t\t\r\n\t\treturn (\r\n\t\t\t<Tippy interactive={true} placement=\"top\" visible={this.state.menuShown}\r\n\t\t\t\tclassName=\"floating-menu\" theme=\"light\" maxWidth=\"none\" content=\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.operations.map(operation => \r\n\t\t\t\t\t<img src={process.env.PUBLIC_URL + \"/icons/\" + operation.icon + \".svg\"}\r\n\t\t\t\t\t\talt=\"Sticker Operation\" key={operation.icon} title={operation.title}\r\n\t\t\t\t\t\tclassName=\"menu-item oper-item icon-wrapper\" onClick=\r\n\t\t\t\t\t\t{operation.transform?this.operationItemClicked.bind(this,\r\n\t\t\t\t\t\toperation.transform):operation.clickfunc}/>)\r\n\t\t\t\t}>\r\n\t\t\t\t\r\n\t\t\t\t<img src={imageSource.getStickerImage(this.props.stickerID)} alt=\"Sticker\"\r\n\t\t\t\t\tdraggable={false} ref={this.element} style={\r\n\t\t\t\t{\r\n\t\t\t\t\twidth: this.stickerWidth, height: this.stickerHeight,\r\n\t\t\t\t\tposition: \"absolute\", left: this.state.coordX, top: this.state.coordY,\r\n\t\t\t\t\ttransform: `matrix(${transform[0][0]},${transform[1][0]},${transform[0][1]},${transform[1][1]},0,0)`\r\n\t\t\t\t}}/>\r\n\t\t\t</Tippy>\r\n\t\t);\r\n\t}\r\n}\r\n","import React from \"react\";\r\nimport FloatingMenus from \"./floating-menus.js\";\r\nimport FullScreenButton from \"./full-screen-button.js\";\r\nimport Sticker from \"./sticker.js\";\r\nimport { imageSource, screenOrientation } from \"./utils.js\";\r\n\r\nexport default class StickyScene extends React.Component\r\n{\r\n\tconstructor(props)\r\n\t{ \r\n\t\tsuper(props); this.nextIndex=0;\r\n\t\tthis.state={ sceneID: \"underwater-treasures\", stickers: [] };\r\n\t\tthis.menuItemClicked=this.menuItemClicked.bind(this);\r\n\t\tthis.fullscrModeChanged=this.fullscrModeChanged.bind(this);\r\n\t}\r\n\t\r\n\tmenuItemClicked(event)\r\n\t{\r\n\t\tswitch (event.type)\r\n\t\t{\r\n\t\t\tcase \"newscene\":\r\n\t\t\t\tthis.setState({ sceneID: event.detail.imageID, stickers: [] });\r\n\t\t\t\tthis.nextIndex=0; break;\r\n\t\t\tcase \"addsticker\":\r\n\t\t\t\t//Array.concat is wasteful!\r\n\t\t\t\tthis.state.stickers.push(\r\n\t\t\t\t{ index: this.nextIndex++, sticker: event.detail.imageID });\r\n\t\t\t\tthis.setState(state => ({ stickers: state.stickers }));\r\n\t\t\t\tbreak;\r\n\t\t\tdefault: break;\r\n\t\t}\r\n\t}\r\n\t\r\n\tstickerRemoved(index)\r\n\t{\r\n\t\tconst arrayIndex=this.state.stickers.findIndex(stickerData => \r\n\t\t\t\tstickerData.index===index);\r\n\t\tthis.state.stickers.splice(arrayIndex,1);\r\n\t\tthis.setState(state => ({ stickers: state.stickers }));\r\n\t}\r\n\t\r\n\tfullscrModeChanged(isFullScreen)\r\n\t{\r\n\t\tif ((isFullScreen)&&(!this.hasOwnProperty(\"locked\")))\r\n\t\t{\r\n\t\t\tconst orientation=screenOrientation.orientation;\r\n\t\t\tif (orientation instanceof String)\r\n\t\t\t{\r\n\t\t\t\tconst lockOrientation=screenOrientation.lockOrientation;\r\n\t\t\t\tif (lockOrientation) this.locked=lockOrientation(\"landscape\");\r\n\t\t\t}\r\n\t\t\telse if (orientation)\r\n\t\t\t{\r\n\t\t\t\torientation.lock(\"landscape\").then(() => this.locked=true).catch(\r\n\t\t\t\t\t\t() => this.locked=false);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\trender()\r\n\t{\r\n\t\treturn (\r\n\t\t\t<div className=\"w-100 h-100\">\r\n\t\t\t\t<img src={imageSource.getSceneImage(this.state.sceneID)} alt=\"Background Scene\"\r\n\t\t\t\t\tclassName=\"w-100 h-100\" draggable={false}/>\r\n\t\t\t\t\t\r\n\t\t\t\t{this.state.stickers.map(stickerData => \r\n\t\t\t\t\t<Sticker stickerID={stickerData.sticker} key={\"sticker-\" + stickerData.index}\r\n\t\t\t\t\t\tonRemove={this.stickerRemoved.bind(this,stickerData.index)}/>\r\n\t\t\t\t)}\r\n\t\t\t\t\r\n\t\t\t\t<FloatingMenus sceneID={this.state.sceneID} onMenuItemClick={this.menuItemClicked}/>\r\n\t\t\t\t<FullScreenButton onChange={this.fullscrModeChanged}/>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\n\r\nimport StickyScene from \"./sticky-scene.js\";\r\n\r\nReactDOM.render(\r\n\t<React.StrictMode>\r\n\t\t<StickyScene/>\r\n\t</React.StrictMode>,\r\n\tdocument.getElementById(\"stickySceneRoot\"));\r\n"],"sourceRoot":""}