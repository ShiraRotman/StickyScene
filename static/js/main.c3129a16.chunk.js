(this["webpackJsonpsticky-scene"]=this["webpackJsonpsticky-scene"]||[]).push([[0],{11:function(e,t,n){e.exports=n(16)},16:function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i),a=n(7),c=n.n(a),s=n(10),o=n(2),u=n(3),l=n(1),d=n(5),h=n(4),g=n(8),m=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var i;return Object(o.a)(this,n),(i=t.call(this,e)).state={},"toggled"in e||(i.state.toggled=!1),i.buttonPressed=i.buttonPressed.bind(Object(l.a)(i)),i.buttonReleased=i.buttonReleased.bind(Object(l.a)(i)),i}return Object(u.a)(n,[{key:"buttonPressed",value:function(){"toggled"in this.props||this.setState({toggled:!0})}},{key:"buttonReleased",value:function(){"toggled"in this.props||this.setState({toggled:!1})}},{key:"render",value:function(){var e,t="pseudo-button icon-wrapper";return t+=(e="toggled"in this.props?this.props.toggled:this.state.toggled)?" toggled":" untoggled","className"in this.props&&(t+=" "+this.props.className),r.a.createElement("div",{className:t,role:"button",onClick:this.props.onClick,onMouseDown:this.buttonPressed,onMouseUp:this.buttonReleased,onMouseLeave:this.buttonReleased},r.a.createElement("img",{src:e&&"toggledIcon"in this.props?this.props.toggledIcon:this.props.icon,alt:this.props.alt,className:"w-100 h-100",draggable:!1}))}}]),n}(r.a.Component),p="Prototype methods can't be called from instances of the base class!",f=function(){function e(){Object(o.a)(this,e)}return Object(u.a)(e,[{key:"getScenesThumbs",value:function(){throw new TypeError(p)}},{key:"getSceneImage",value:function(e){throw new TypeError(p)}},{key:"getStickerImage",value:function(e){throw new TypeError(p)}},{key:"getStickersThumbs",value:function(e){throw new TypeError(p)}}]),e}(),b=window.innerWidth,v=window.innerHeight;f.pageWidth=b,f.pageHeight=v,f.sceneThumbWidth=function(e){return e<1200?128:192}(b),f.sceneThumbHeight=f.sceneThumbWidth*(v/b),f.stickerThumbWidth=f.sceneThumbWidth/2,f.stickerThumbHeight=f.stickerThumbWidth,f.stickerWidth=f.stickerThumbWidth,f.stickerHeight=f.stickerThumbHeight;var k=["underwater-treasures","space-cosmonaut"],E={"underwater-treasures":["blue-black-fish","dory-fish","submarine","seahorse"],"space-cosmonaut":["rocket-spaceship","alien-flying-saucer"]},y=new(function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"getScenesThumbs",value:function(){return k.map((function(e){return{id:e,path:"/StickyScene/hardcoded/scenes/thumbs/"+e+".jpg"}}))}},{key:"getStickersThumbs",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=E[e];if(n||(n=[]),!t)for(var i in E)i!==e&&(n=n.concat(E[i]));return n.map((function(e){return{id:e,path:"/StickyScene/hardcoded/stickers/"+e+".jpg"}}))}},{key:"getSceneImage",value:function(e){return"/StickyScene/hardcoded/scenes/"+e+".jpg"}},{key:"getStickerImage",value:function(e){return"/StickyScene/hardcoded/stickers/"+e+".jpg"}}]),n}(f)),T=[{type:"mousedown",listener:D},{type:"mousemove",listener:M},{type:"mouseup",listener:_},{type:"mouseleave",listener:M}],S=[{type:"pointerdown",listener:function(e){I(e,"dragdropstart",D)}},{type:"pointermove",listener:N},{type:"pointerup",listener:function(e){I(e,"dragdropend",_)}},{type:"pointerleave",listener:N},{type:"pointercancel",listener:R}],w=[{type:"touchstart",listener:function(e){e.preventDefault();var t=e.target,n=e.targetTouches[0];t.setAttribute("data-touch",n.identifier),j(t,"dragdropstart",n)}},{type:"touchmove",listener:function(e){A(e,"dragdropmove","changedTouches")}},{type:"touchend",listener:function(e){A(e,"dragdropend","changedTouches",!0)}},{type:"touchcancel",listener:R}];function O(e){if(!e)throw new ReferenceError("A DOM element must be supplied!");if(!(e instanceof Element))throw new TypeError("The parameter supplied must be a DOM element!")}function C(e,t){window.PointerEvent?S.forEach((function(e){return t(e.type,e.listener)})):(T.forEach((function(e){return t(e.type,e.listener)})),window.TouchEvent&&w.forEach((function(e){return t(e.type,e.listener)})))}function j(e,t,n){var i;n&&(i={detail:{pageX:n.pageX,pageY:n.pageY}}),e.dispatchEvent(new CustomEvent(t,i))}function D(e){0===e.button&&j(e.target,"dragdropstart",e)}function M(e){0!==(1&e.buttons)&&j(e.target,"dragdropmove",e)}function _(e){0===e.button&&j(e.target,"dragdropend",e)}function I(e,t,n){e.isPrimary&&("mouse"===e.pointerType?n(e):j(e.target,t,e))}function N(e){I(e,"dragdropmove",M)}function A(e,t,n,i){e.preventDefault();var r=e.target,a=r.getAttribute("data-touch");if(a){for(var c=!1,s=0;!c&&s<e[n].length;)e[n][s].identifier===a?c=!0:s++;c?(e.stopPropagation(),i&&r.removeAttribute("data-touch"),j(r,t,e[n][s])):R(e)}}function R(e){var t=e.target;t.removeAttribute("data-touch"),j(t,"dragdropcancel")}var P={registerDragEvents:function(e){O(e),e.draggable=!1,C(0,e.addEventListener.bind(e))},unregisterDragEvents:function(e){O(e),C(0,e.removeEventListener.bind(e))},sendCustomDragEvent:j,TOUCH_ID_ATTR:"data-touch",DRAG_START_EVENT_TYPE:"dragdropstart",DRAG_MOVE_EVENT_TYPE:"dragdropmove",DRAG_END_EVENT_TYPE:"dragdropend",DRAG_CANCEL_EVENT_TYPE:"dragdropcancel"},Y=["newscene","loadscene","savescene"],W=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var i;return Object(o.a)(this,n),(i=t.call(this,e)).state={shown:!1,sceneSelection:!1},i.toggleMenus=i.toggleMenus.bind(Object(l.a)(i)),i.handleMenuOptionClick=i.handleMenuOptionClick.bind(Object(l.a)(i)),i.handleNewSceneSelect=i.handleNewSceneSelect.bind(Object(l.a)(i)),i.handleStickerSelect=i.handleStickerSelect.bind(Object(l.a)(i)),i}return Object(u.a)(n,[{key:"toggleMenus",value:function(){var e=this;this.setState((function(t){return{shown:!e.state.shown,sceneSelection:!1}}))}},{key:"handleMenuOptionClick",value:function(e){switch(e.currentTarget.id){case"newscene":this.setState({sceneSelection:!0});break;case"menuback":this.setState({sceneSelection:!1});break;default:this.props.onMenuItemClick(new CustomEvent(e.currentTarget.id)),this.setState({shown:!1})}}},{key:"handleNewSceneSelect",value:function(e){this.sendThumbClickEvent("newscene",e.currentTarget.id),this.setState({shown:!1,sceneSelection:!1})}},{key:"handleStickerSelect",value:function(e){this.sendThumbClickEvent("addsticker",e.currentTarget.id)}},{key:"sendThumbClickEvent",value:function(e,t){var n=new CustomEvent(e,{detail:{imageID:t}});this.props.onMenuItemClick(n)}},{key:"render",value:function(){var e=this,t=this.state.sceneSelection?["menuback"]:Y,n=t.map((function(t){return r.a.createElement("div",{className:"menu-item icon-wrapper my-1",id:t,key:t,onClick:e.handleMenuOptionClick},r.a.createElement("img",{src:"/StickyScene/icons/"+t+".svg",alt:"Menu Option",className:"w-100 h-100"}))}));return this.state.sceneSelection&&(t=y.getScenesThumbs(),n=n.concat(t.map((function(t){return r.a.createElement("div",{className:"menu-item scene-item",id:t.id,key:t.id,onClick:e.handleNewSceneSelect,style:{width:f.sceneThumbWidth,height:f.sceneThumbHeight}},r.a.createElement("img",{src:t.path,alt:"Scene Thumb",className:"w-100 h-100"}))})))),r.a.createElement(g.a,{interactive:!0,arrow:!1,offset:[0,0],visible:this.state.shown,placement:"bottom-start",className:"floating-menu vertical-floating-menu",theme:"light",content:n},r.a.createElement(g.a,{interactive:!0,arrow:!1,offset:[0,0],visible:this.state.shown,placement:"left-start",theme:"light",maxWidth:"none",className:"floating-menu",content:y.getStickersThumbs(this.props.sceneID).map((function(t){return r.a.createElement("img",{src:t.path,alt:"Sticker Thumb",onClick:e.handleStickerSelect,className:"menu-item sticker-item",key:t.id,id:t.id,style:{width:f.stickerThumbWidth,height:f.stickerThumbHeight}})}))},r.a.createElement("span",{className:"menu-toggle"},r.a.createElement(m,{icon:"/StickyScene/icons/menus.svg",alt:"Menus",toggled:this.state.shown,onClick:this.toggleMenus}))))}}]),n}(r.a.Component),H=n(6),V=n.n(H),L=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var i;return Object(o.a)(this,n),(i=t.call(this,e)).state={isFullScrMode:!1},i.fullscrModeChanged=i.fullscrModeChanged.bind(Object(l.a)(i)),i.buttonClicked=i.buttonClicked.bind(Object(l.a)(i)),i}return Object(u.a)(n,[{key:"componentDidMount",value:function(){V.a.fullscreenEnabled&&V.a.addEventListener("fullscreenchange",this.fullscrModeChanged)}},{key:"componentWillUnmount",value:function(){V.a.fullscreenEnabled&&V.a.removeEventListener("fullscreenchange",this.fullscrModeChanged)}},{key:"fullscrModeChanged",value:function(){this.setState({isFullScrMode:null!==V.a.fullscreenElement})}},{key:"buttonClicked",value:function(){null===V.a.fullscreenElement?V.a.requestFullscreen(document.documentElement):V.a.exitFullscreen()}},{key:"render",value:function(){return r.a.createElement(m,{alt:"Fullscreen Mode",onClick:this.buttonClicked,className:"full-screen-button"+(V.a.fullscreenEnabled?"":" d-none"),icon:"/StickyScene/icons/"+(this.state.isFullScrMode?"exitfullscr":"fullscreen")+".svg"})}}]),n}(r.a.Component),G=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var i;return Object(o.a)(this,n),(i=t.call(this,e)).element=r.a.createRef(),i.state={coordX:(window.innerWidth-f.stickerWidth)/2,coordY:(window.innerHeight-f.stickerHeight)/2},i.dragEvents=[{type:P.DRAG_START_EVENT_TYPE,listener:i.controllerPressed.bind(Object(l.a)(i))},{type:P.DRAG_MOVE_EVENT_TYPE,listener:i.controllerMoved.bind(Object(l.a)(i))},{type:P.DRAG_END_EVENT_TYPE,listener:i.controllerReleased.bind(Object(l.a)(i))},{type:P.DRAG_CANCEL_EVENT_TYPE,listener:i.controllerLeft.bind(Object(l.a)(i))}],i}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.element.current;this.dragEvents.forEach((function(t){return e.addEventListener(t.type,t.listener)})),this.touchID&&(e.setAttribute(P.TOUCH_ID_ATTR,this.touchID),delete this.touchID),P.registerDragEvents(e)}},{key:"componentWillUnmount",value:function(){var e=this.element.current;P.unregisterDragEvents(e),this.dragEvents.forEach((function(t){return e.removeEventListener(t.type,t.listener)})),e.hasAttribute(P.TOUCH_ID_ATTR)&&(this.touchID=e.getAttribute(P.TOUCH_ID_ATTR))}},{key:"controllerPressed",value:function(e){if(!this.dragging){var t=this.element.current.getBoundingClientRect();this.dragging={originX:e.detail.pageX-t.left,originY:e.detail.pageY-t.top}}}},{key:"controllerMoved",value:function(e){this.dragging&&this.updatePosition(e)}},{key:"controllerLeft",value:function(){this.dragging&&delete this.dragging}},{key:"controllerReleased",value:function(e){if(this.dragging){this.updatePosition(e),delete this.dragging;var t=this.element.current;this.setState({coordX:t.style.left,coordY:t.style.top})}}},{key:"updatePosition",value:function(e){var t=this.element.current;t.style.left=e.detail.pageX-this.dragging.originX+"px",t.style.top=e.detail.pageY-this.dragging.originY+"px"}},{key:"render",value:function(){return r.a.createElement("img",{src:y.getStickerImage(this.props.stickerID),alt:"Sticker",draggable:!1,ref:this.element,style:{width:f.stickerWidth,height:f.stickerHeight,position:"absolute",left:this.state.coordX,top:this.state.coordY}})}}]),n}(r.a.Component),X=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var i;return Object(o.a)(this,n),(i=t.call(this,e)).state={sceneID:"underwater-treasures",stickers:[]},i.sceneTouchMoved=i.sceneTouchMoved.bind(Object(l.a)(i)),i.sceneTouchEnded=i.sceneTouchEnded.bind(Object(l.a)(i)),i.menuItemClicked=i.menuItemClicked.bind(Object(l.a)(i)),i}return Object(u.a)(n,[{key:"handleTouchEvent",value:function(e,t){var n,i=Object(s.a)(e.changedTouches);try{for(i.s();!(n=i.n()).done;){var r=n.value,a=r.target;a.hasAttribute(P.TOUCH_ID_ATTR)&&P.sendCustomDragEvent(a,t,r)}}catch(c){i.e(c)}finally{i.f()}}},{key:"sceneTouchMoved",value:function(e){this.handleTouchEvent(e,P.DRAG_MOVE_EVENT_TYPE)}},{key:"sceneTouchEnded",value:function(e){this.handleTouchEvent(e,P.DRAG_END_EVENT_TYPE)}},{key:"menuItemClicked",value:function(e){switch(e.type){case"newscene":this.setState({sceneID:e.detail.imageID,stickers:[]});break;case"addsticker":this.state.stickers.push(e.detail.imageID),this.setState((function(e){return{stickers:e.stickers}}))}}},{key:"render",value:function(){return r.a.createElement("div",{className:"w-100 h-100"},r.a.createElement("img",{src:y.getSceneImage(this.state.sceneID),alt:"Background Scene",className:"w-100 h-100",onTouchMove:this.sceneTouchMoved,onTouchEnd:this.sceneTouchEnded}),this.state.stickers.map((function(e,t){return r.a.createElement(G,{stickerID:e,key:"sticker-"+t})})),r.a.createElement(W,{sceneID:this.state.sceneID,onMenuItemClick:this.menuItemClicked}),r.a.createElement(L,null))}}]),n}(r.a.Component);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(X,null)),document.getElementById("stickySceneRoot"))}},[[11,1,2]]]);
//# sourceMappingURL=main.c3129a16.chunk.js.map